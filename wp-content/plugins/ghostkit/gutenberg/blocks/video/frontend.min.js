!function(){"use strict";const{GHOSTKIT:e,jQuery:t}=window,o=t(document);function i(){t(".ghostkit-video-fullscreen:visible .ghostkit-video-fullscreen-frame").each((function(){const e=t(this),o=e.data("ghostkit-video-aspect-ratio")||16/9;let i,n;o>window.innerWidth/window.innerHeight?(i=.9*window.innerWidth,n=i/o):(n=.9*window.innerHeight,i=n*o),e.css({width:i,height:n,top:(window.innerHeight-n)/2,left:(window.innerWidth-i)/2})}))}const n=function(e,t,o){var i,n=o||{},a=n.noTrailing,s=void 0!==a&&a,l=n.noLeading,d=void 0!==l&&l,r=n.debounceMode,c=void 0===r?void 0:r,v=!1,u=0;function g(){i&&clearTimeout(i)}function p(){for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];var l=this,r=Date.now()-u;function p(){u=Date.now(),t.apply(l,n)}function h(){i=void 0}v||(d||!c||i||p(),g(),void 0===c&&r>e?d?(u=Date.now(),s||(i=setTimeout(c?h:p,e))):p():!0!==s&&(i=setTimeout(c?h:p,void 0===c?e-r:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly,o=void 0!==t&&t;g(),v=!o},p}(200,(a=()=>{i()},s=[],l=null,d=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];s=t,l||(l=requestAnimationFrame((function(){l=null,a.apply(void 0,s)})))},d.cancel=function(){l&&(cancelAnimationFrame(l),l=null)},d));var a,s,l,d;t(window).on("DOMContentLoaded load resize orientationchange",(()=>{n()})),o.on("initBlocks.ghostkit",((o,n)=>{void 0!==window.VideoWorker&&(e.triggerEvent("beforePrepareVideo",n),t(".ghostkit-video:not(.ghostkit-video-ready)").each((function(){const o=t(this).addClass("ghostkit-video-ready"),a=o.attr("data-video"),s=o.attr("data-click-action"),l="true"===o.attr("data-video-autoplay"),d="true"===o.attr("data-video-autopause"),r="true"===o.attr("data-video-loop");let c=o.find(".ghostkit-video-fullscreen-close-icon");c=c.length?c.html():o.attr("data-fullscreen-action-close-icon")?`<span class="${o.attr("data-fullscreen-action-close-icon")}"></span>`:"";const v=o.attr("data-fullscreen-background-color");let u=o.find(".ghostkit-video-poster"),g=!1,p=!1,h=0,f=o.attr("data-video-aspect-ratio");f=f&&f.split(":")[0]&&f.split(":")[1]?f.split(":")[0]/f.split(":")[1]:16/9,parseFloat(o.attr("data-video-volume"))||(h=1),l&&(h=1);const k=new window.VideoWorker(a,{autoplay:0,loop:r,mute:h,volume:parseFloat(o.attr("data-video-volume"))||0,showContols:1});if(k&&k.isValid()){let a=0,r=0,h=!1;o.on("click",(()=>{r||(r=1,"fullscreen"===s?a?g&&(o.removeClass("ghostkit-video-fullscreen-closed"),g.fadeIn(200),k.play()):(o.addClass("ghostkit-video-loading"),k.getIframe((e=>{p=t(e);const n=p.parent();g=t(`<div class="ghostkit-video-fullscreen" style="background-color: ${v};">`).appendTo("body").append(t(`<div class="ghostkit-video-fullscreen-close">${c}</div>`)).append(t('<div class="ghostkit-video-fullscreen-frame">').append(p)),g.data("ghostkit-video-aspect-ratio",f),n.remove(),g.fadeIn(200),g.on("click",(e=>{const i=t(e.target);(i.hasClass("ghostkit-video-fullscreen")||i.hasClass("ghostkit-video-fullscreen-close")||i.closest(".ghostkit-video-fullscreen-close").length)&&(k.pause(),g.fadeOut(200),o.addClass("ghostkit-video-fullscreen-closed"))})),i()})),a=1):a?k.play():(o.addClass("ghostkit-video-loading"),k.getIframe((e=>{p=t(e);const i=p.parent();t('<div class="ghostkit-video-frame">').appendTo(o).append(p),i.remove()})),a=1))})),u.length||o.hasClass("is-style-icon-only")||k.getImageURL((e=>{u=t(`<div class="ghostkit-video-poster"><img src="${e}" alt=""></div>`),o.append(u)}));let w=!1;if(k.on("ready",(()=>{o.removeClass("ghostkit-video-loading"),"fullscreen"===s?o.hasClass("ghostkit-video-fullscreen-closed")||k.play():(o.addClass("ghostkit-video-playing"),k.play())})),k.on("play",(()=>{h=!0})),k.on("pause",(()=>{h=!1,w=!0,"fullscreen"===s&&(r=0)})),"fullscreen"!==s&&(l||d)){if(!("IntersectionObserver"in window))return;const t={callback:e=>{e.forEach((e=>{o[0]===e.target&&(!w&&!h&&l&&e.isIntersecting&&(r?k.play():o.click()),h&&d&&!e.isIntersecting&&k.pause())}))},options:{threshold:.6}};e.triggerEvent("prepareVideoObserver",n,t),new IntersectionObserver(t.callback,t.options).observe(o[0])}}})),e.triggerEvent("afterPrepareVideo",n))}))}();